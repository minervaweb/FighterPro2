{{ $data := index .Site.Data .Site.Language.Lang }}

{{ if $data.homepage.products.enable }}

<section class="section gallery">
  <div class="container">
    <div class="row">
      <div class="col-12 text-center mb-5">
        <h1 class="font-weight-bold">{{$data.homepage.products.title}}</h1>
      </div>
      {{ range first 8 (where .Site.RegularPages "Section" "products") }} <!-- Limit to 8 products -->
      <div class="col-lg-3 col-md-4 col-sm-6 col-6 mb-4">
        <a href="{{ .Permalink }}" class="gallery-popup">
          <div class="block">
            <div class="gallery-overlay">
            </div>
            <img class="img-fluid" src="{{range first 1 .Params.images}}{{.|absURL}}{{end}}" alt="{{.Title}}">
          </div>
        </a>
        <div class="product-info">
          <h4 class="mb-2"><a href="{{.Permalink}}" class="link-title">{{.Title}}</a></h4>
          <p class="price">{{if .Params.discount_price}}{{site.Params.currency}}{{.Params.discount_price}}{{else}}{{site.Params.currency}}{{.Params.price}}{{end}}
          {{if .Params.discount_price}}<s class="price">{{site.Params.currency}}{{ .Params.price }}</s>{{end}}
          </p>
        </div>
      </div>
      {{ end }}
    </div>
    <div class="text-center mt-4">
      <a href="/products" class="btn btn-main">See All Products</a> <!-- Custom URL to products page -->
    </div>
  </div>
</section>

{{ end }}
